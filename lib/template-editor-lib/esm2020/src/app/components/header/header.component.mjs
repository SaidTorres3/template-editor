import { Component, EventEmitter, Input, Output } from "@angular/core";
import { docxToString } from "../../../utils/docxParsers/docxToString";
import { editableObjectToDocx } from "../../../utils/docxParsers/editableObjectsToDocx";
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
export class HeaderComponent {
    constructor() {
        this.fileChange = new EventEmitter();
        this.docxFileChanged = new EventEmitter();
    }
    onFileChangeHandler(e) {
        const event = e;
        this.fileChange.emit(event);
    }
    save() {
        if (!this.docxFile.content) {
            return;
        }
        // update the last modified date 
        console.log(this.docxFile.content);
        editableObjectToDocx({
            modifiedObjects: this.history[this.workspace.historyIndex].editablePhrases,
            fileIn: this.docxFile.content,
        }).then((newDocx) => {
            this.docxFileChanged.emit({
                name: this.docxFile.name,
                content: newDocx,
                lastModifiedDate: new Date().getTime(),
            });
        });
    }
    saveToComputer() {
        if (!this.docxFile.content) {
            return;
        }
        editableObjectToDocx({
            modifiedObjects: this.history[this.workspace.historyIndex].editablePhrases,
            fileIn: this.docxFile.content,
        }).then((newDocx) => {
            const url = URL.createObjectURL(newDocx);
            const link = document.createElement("a");
            link.href = url;
            link.download = this.docxFile.name;
            link.click();
            link.remove();
            URL.revokeObjectURL(url);
            docxToString(newDocx).then((string) => {
                console.log(string);
            });
        });
    }
    fileDropDownToggle() {
        this.workspace.fileDropDown = true;
        let clickCount = 0;
        const quitDropDown = (e) => {
            clickCount++;
            if (clickCount > 1) {
                this.workspace.fileDropDown = false;
                window.onclick = null;
            }
        };
        window.onclick = quitDropDown;
    }
}
HeaderComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.0.3", ngImport: i0, type: HeaderComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
HeaderComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.0.3", type: HeaderComponent, selector: "app-header[history][docxFile][uploadFileInput][editablePhrases]", inputs: { workspace: "workspace", docxFile: "docxFile", history: "history", uploadFileInput: "uploadFileInput", editablePhrases: "editablePhrases" }, outputs: { fileChange: "fileChange", docxFileChanged: "docxFileChanged" }, ngImport: i0, template: "<div class=\"header\">\r\n  <input\r\n    #uploadFileInput\r\n    (change)=\"onFileChangeHandler($event)\"\r\n    class=\"invisible\"\r\n    type=\"file\"\r\n    id=\"template\"\r\n    name=\"template\"\r\n    accept=\".docx\"\r\n  />\r\n  <div *ngIf=\"workspace.fileDropDown\" class=\"header__element__dropdown\">\r\n    <p\r\n      class=\"header__element__dropdown__item\"\r\n      [class.header__element__dropdown__item--inactive]=\"!docxFile.content\"\r\n      (click)=\"save()\"\r\n    >\r\n      Guardar\r\n    </p>\r\n    <p\r\n      class=\"header__element__dropdown__item\"\r\n      [class.header__element__dropdown__item--inactive]=\"!docxFile.content\"\r\n      (click)=\"saveToComputer()\"\r\n    >\r\n      Guardar a computadora\r\n    </p>\r\n    <p\r\n      class=\"header__element__dropdown__item\"\r\n      (click)=\"uploadFileInput.click()\"\r\n    >\r\n      Abrir template\r\n    </p>\r\n  </div>\r\n  <div\r\n    class=\"header__element header__element--file\"\r\n    (click)=\"fileDropDownToggle()\"\r\n  >\r\n    <label>Archivo</label>\r\n  </div>\r\n  <div class=\"header__element header__element--title\">\r\n    {{docxFile.name}}\r\n  </div>\r\n  <div class=\"header__element\" *ngIf=\"docxFile.lastModifiedDate\">\r\n    <!-- date with hour -->\r\n    \u00DAltima modificaci\u00F3n: {{docxFile.lastModifiedDate | date: 'dd/MM/yyyy HH:mm'}}\r\n  </div>\r\n</div>\r\n", styles: [".invisible{visibility:hidden;display:none}.header{top:0px!important;height:var(--header-height);width:100%;box-shadow:0 2px 4px #0003;z-index:10000;background-color:var(--elements-color);display:flex;flex-direction:row}.header__element{border-right:1px solid #888;padding:10px;display:flex;justify-content:center;align-items:center}.header__element:hover{background-color:#f0f0f0}.header__element--file{-webkit-user-select:none;user-select:none;width:150px}.header__element--title{flex-grow:1}.header__element__dropdown{position:absolute;display:flex;flex-direction:column;width:200px;background-color:#fff;margin-top:var(--header-height);z-index:10001;border:1px solid #888}.header__element__dropdown__item{margin:0;padding:10px;text-align:center;-webkit-user-select:none;user-select:none;cursor:pointer}.header__element__dropdown__item:hover{background-color:#f0f0f0}.header__element__dropdown__item--inactive{color:#0005}.header__element__dropdown__item--inactive{background-color:#fff!important;cursor:default}\n", "*{box-sizing:border-box!important}.invisible{visibility:hidden;display:none}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-track{background:#f1f1f1}::-webkit-scrollbar-thumb{background:#8888}::-webkit-scrollbar-thumb:hover{background:#555}\n"], directives: [{ type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }], pipes: { "date": i1.DatePipe } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.0.3", ngImport: i0, type: HeaderComponent, decorators: [{
            type: Component,
            args: [{ selector: "app-header[history][docxFile][uploadFileInput][editablePhrases]", template: "<div class=\"header\">\r\n  <input\r\n    #uploadFileInput\r\n    (change)=\"onFileChangeHandler($event)\"\r\n    class=\"invisible\"\r\n    type=\"file\"\r\n    id=\"template\"\r\n    name=\"template\"\r\n    accept=\".docx\"\r\n  />\r\n  <div *ngIf=\"workspace.fileDropDown\" class=\"header__element__dropdown\">\r\n    <p\r\n      class=\"header__element__dropdown__item\"\r\n      [class.header__element__dropdown__item--inactive]=\"!docxFile.content\"\r\n      (click)=\"save()\"\r\n    >\r\n      Guardar\r\n    </p>\r\n    <p\r\n      class=\"header__element__dropdown__item\"\r\n      [class.header__element__dropdown__item--inactive]=\"!docxFile.content\"\r\n      (click)=\"saveToComputer()\"\r\n    >\r\n      Guardar a computadora\r\n    </p>\r\n    <p\r\n      class=\"header__element__dropdown__item\"\r\n      (click)=\"uploadFileInput.click()\"\r\n    >\r\n      Abrir template\r\n    </p>\r\n  </div>\r\n  <div\r\n    class=\"header__element header__element--file\"\r\n    (click)=\"fileDropDownToggle()\"\r\n  >\r\n    <label>Archivo</label>\r\n  </div>\r\n  <div class=\"header__element header__element--title\">\r\n    {{docxFile.name}}\r\n  </div>\r\n  <div class=\"header__element\" *ngIf=\"docxFile.lastModifiedDate\">\r\n    <!-- date with hour -->\r\n    \u00DAltima modificaci\u00F3n: {{docxFile.lastModifiedDate | date: 'dd/MM/yyyy HH:mm'}}\r\n  </div>\r\n</div>\r\n", styles: [".invisible{visibility:hidden;display:none}.header{top:0px!important;height:var(--header-height);width:100%;box-shadow:0 2px 4px #0003;z-index:10000;background-color:var(--elements-color);display:flex;flex-direction:row}.header__element{border-right:1px solid #888;padding:10px;display:flex;justify-content:center;align-items:center}.header__element:hover{background-color:#f0f0f0}.header__element--file{-webkit-user-select:none;user-select:none;width:150px}.header__element--title{flex-grow:1}.header__element__dropdown{position:absolute;display:flex;flex-direction:column;width:200px;background-color:#fff;margin-top:var(--header-height);z-index:10001;border:1px solid #888}.header__element__dropdown__item{margin:0;padding:10px;text-align:center;-webkit-user-select:none;user-select:none;cursor:pointer}.header__element__dropdown__item:hover{background-color:#f0f0f0}.header__element__dropdown__item--inactive{color:#0005}.header__element__dropdown__item--inactive{background-color:#fff!important;cursor:default}\n", "*{box-sizing:border-box!important}.invisible{visibility:hidden;display:none}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-track{background:#f1f1f1}::-webkit-scrollbar-thumb{background:#8888}::-webkit-scrollbar-thumb:hover{background:#555}\n"] }]
        }], propDecorators: { workspace: [{
                type: Input
            }], docxFile: [{
                type: Input
            }], history: [{
                type: Input
            }], uploadFileInput: [{
                type: Input
            }], editablePhrases: [{
                type: Input
            }], fileChange: [{
                type: Output
            }], docxFileChanged: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVhZGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyYy9hcHAvY29tcG9uZW50cy9oZWFkZXIvaGVhZGVyLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyYy9hcHAvY29tcG9uZW50cy9oZWFkZXIvaGVhZGVyLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFdkUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHlDQUF5QyxDQUFDO0FBQ3ZFLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLGtEQUFrRCxDQUFDOzs7QUFReEYsTUFBTSxPQUFPLGVBQWU7SUFMNUI7UUFXWSxlQUFVLEdBQTZCLElBQUksWUFBWSxFQUFjLENBQUM7UUFDdEUsb0JBQWUsR0FBMkIsSUFBSSxZQUFZLEVBQVksQ0FBQztLQTREbEY7SUExRFEsbUJBQW1CLENBQUMsQ0FBUTtRQUNqQyxNQUFNLEtBQUssR0FBRyxDQUFlLENBQUM7UUFDOUIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUVNLElBQUk7UUFDVCxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUU7WUFDMUIsT0FBTztTQUNSO1FBQ0QsaUNBQWlDO1FBQ2pDLE9BQU8sQ0FBQyxHQUFHLENBQ1QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQ3RCLENBQUE7UUFDRCxvQkFBb0IsQ0FBQztZQUNuQixlQUFlLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxDQUFDLGVBQWU7WUFDMUUsTUFBTSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTztTQUM5QixDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUU7WUFDbEIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUM7Z0JBQ3hCLElBQUksRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUk7Z0JBQ3hCLE9BQU8sRUFBRSxPQUFPO2dCQUNoQixnQkFBZ0IsRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDLE9BQU8sRUFBRTthQUN2QyxDQUFDLENBQUE7UUFDSixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFTSxjQUFjO1FBQ25CLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRTtZQUMxQixPQUFPO1NBQ1I7UUFDRCxvQkFBb0IsQ0FBQztZQUNuQixlQUFlLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxDQUFDLGVBQWU7WUFDMUUsTUFBTSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTztTQUM5QixDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUU7WUFDbEIsTUFBTSxHQUFHLEdBQUcsR0FBRyxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN6QyxNQUFNLElBQUksR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3pDLElBQUksQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDO1lBQ2hCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUM7WUFDbkMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ2IsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ2QsR0FBRyxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUN6QixZQUFZLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUU7Z0JBQ3BDLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDdEIsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFTSxrQkFBa0I7UUFDdkIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDO1FBQ25DLElBQUksVUFBVSxHQUFHLENBQUMsQ0FBQztRQUNuQixNQUFNLFlBQVksR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFO1lBQ3pCLFVBQVUsRUFBRSxDQUFDO1lBQ2IsSUFBSSxVQUFVLEdBQUcsQ0FBQyxFQUFFO2dCQUNsQixJQUFJLENBQUMsU0FBUyxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUM7Z0JBQ3BDLE1BQU0sQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO2FBQ3ZCO1FBQ0gsQ0FBQyxDQUFDO1FBQ0YsTUFBTSxDQUFDLE9BQU8sR0FBRyxZQUFZLENBQUM7SUFDaEMsQ0FBQzs7NEdBbEVVLGVBQWU7Z0dBQWYsZUFBZSx3VUNYNUIsbTNDQThDQTsyRkRuQ2EsZUFBZTtrQkFMM0IsU0FBUzsrQkFDRSxpRUFBaUU7OEJBS2xFLFNBQVM7c0JBQWpCLEtBQUs7Z0JBQ0csUUFBUTtzQkFBaEIsS0FBSztnQkFDRyxPQUFPO3NCQUFmLEtBQUs7Z0JBQ0csZUFBZTtzQkFBdkIsS0FBSztnQkFDRyxlQUFlO3NCQUF2QixLQUFLO2dCQUNJLFVBQVU7c0JBQW5CLE1BQU07Z0JBQ0csZUFBZTtzQkFBeEIsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT3V0cHV0IH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuaW1wb3J0IHsgRG9jeEZpbGUsIEhpc3RvcnksIFdvcmtTcGFjZSB9IGZyb20gXCIuLi8uLi8uLi9hcHAvaW50ZXJmYWNlc1wiO1xyXG5pbXBvcnQgeyBkb2N4VG9TdHJpbmcgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvZG9jeFBhcnNlcnMvZG9jeFRvU3RyaW5nXCI7XHJcbmltcG9ydCB7IGVkaXRhYmxlT2JqZWN0VG9Eb2N4IH0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzL2RvY3hQYXJzZXJzL2VkaXRhYmxlT2JqZWN0c1RvRG9jeFwiO1xyXG5pbXBvcnQgeyBFZGl0YWJsZVBocmFzZSB9IGZyb20gXCIuLi8uLi8uLi91dGlscy9kb2N4UGFyc2Vycy90eXBlc1wiO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6IFwiYXBwLWhlYWRlcltoaXN0b3J5XVtkb2N4RmlsZV1bdXBsb2FkRmlsZUlucHV0XVtlZGl0YWJsZVBocmFzZXNdXCIsXHJcbiAgdGVtcGxhdGVVcmw6IFwiLi9oZWFkZXIuY29tcG9uZW50Lmh0bWxcIixcclxuICBzdHlsZVVybHM6IFtcIi4vaGVhZGVyLmNvbXBvbmVudC5sZXNzXCIsIFwiLi4vLi4vc2hhcmVkL3N0eWxlcy9jb21tb25TdHlsZXMubGVzc1wiXSxcclxufSlcclxuZXhwb3J0IGNsYXNzIEhlYWRlckNvbXBvbmVudCB7XHJcbiAgQElucHV0KCkgd29ya3NwYWNlOiBXb3JrU3BhY2U7XHJcbiAgQElucHV0KCkgZG9jeEZpbGU6IERvY3hGaWxlO1xyXG4gIEBJbnB1dCgpIGhpc3Rvcnk6IEhpc3RvcnlbXTtcclxuICBASW5wdXQoKSB1cGxvYWRGaWxlSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgQElucHV0KCkgZWRpdGFibGVQaHJhc2VzOiBFZGl0YWJsZVBocmFzZVtdO1xyXG4gIEBPdXRwdXQoKSBmaWxlQ2hhbmdlOiBFdmVudEVtaXR0ZXI8SW5wdXRFdmVudD4gPSBuZXcgRXZlbnRFbWl0dGVyPElucHV0RXZlbnQ+KCk7XHJcbiAgQE91dHB1dCgpIGRvY3hGaWxlQ2hhbmdlZDogRXZlbnRFbWl0dGVyPERvY3hGaWxlPiA9IG5ldyBFdmVudEVtaXR0ZXI8RG9jeEZpbGU+KCk7XHJcblxyXG4gIHB1YmxpYyBvbkZpbGVDaGFuZ2VIYW5kbGVyKGU6IEV2ZW50KSB7XHJcbiAgICBjb25zdCBldmVudCA9IGUgYXMgSW5wdXRFdmVudDtcclxuICAgIHRoaXMuZmlsZUNoYW5nZS5lbWl0KGV2ZW50KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzYXZlKCkge1xyXG4gICAgaWYgKCF0aGlzLmRvY3hGaWxlLmNvbnRlbnQpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gdXBkYXRlIHRoZSBsYXN0IG1vZGlmaWVkIGRhdGUgXHJcbiAgICBjb25zb2xlLmxvZyhcclxuICAgICAgdGhpcy5kb2N4RmlsZS5jb250ZW50XHJcbiAgICApXHJcbiAgICBlZGl0YWJsZU9iamVjdFRvRG9jeCh7XHJcbiAgICAgIG1vZGlmaWVkT2JqZWN0czogdGhpcy5oaXN0b3J5W3RoaXMud29ya3NwYWNlLmhpc3RvcnlJbmRleF0uZWRpdGFibGVQaHJhc2VzLFxyXG4gICAgICBmaWxlSW46IHRoaXMuZG9jeEZpbGUuY29udGVudCxcclxuICAgIH0pLnRoZW4oKG5ld0RvY3gpID0+IHtcclxuICAgICAgdGhpcy5kb2N4RmlsZUNoYW5nZWQuZW1pdCh7XHJcbiAgICAgICAgbmFtZTogdGhpcy5kb2N4RmlsZS5uYW1lLFxyXG4gICAgICAgIGNvbnRlbnQ6IG5ld0RvY3gsXHJcbiAgICAgICAgbGFzdE1vZGlmaWVkRGF0ZTogbmV3IERhdGUoKS5nZXRUaW1lKCksXHJcbiAgICAgIH0pXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzYXZlVG9Db21wdXRlcigpIHtcclxuICAgIGlmICghdGhpcy5kb2N4RmlsZS5jb250ZW50KSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGVkaXRhYmxlT2JqZWN0VG9Eb2N4KHtcclxuICAgICAgbW9kaWZpZWRPYmplY3RzOiB0aGlzLmhpc3RvcnlbdGhpcy53b3Jrc3BhY2UuaGlzdG9yeUluZGV4XS5lZGl0YWJsZVBocmFzZXMsXHJcbiAgICAgIGZpbGVJbjogdGhpcy5kb2N4RmlsZS5jb250ZW50LFxyXG4gICAgfSkudGhlbigobmV3RG9jeCkgPT4ge1xyXG4gICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ld0RvY3gpO1xyXG4gICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcbiAgICAgIGxpbmsuaHJlZiA9IHVybDtcclxuICAgICAgbGluay5kb3dubG9hZCA9IHRoaXMuZG9jeEZpbGUubmFtZTtcclxuICAgICAgbGluay5jbGljaygpO1xyXG4gICAgICBsaW5rLnJlbW92ZSgpO1xyXG4gICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XHJcbiAgICAgIGRvY3hUb1N0cmluZyhuZXdEb2N4KS50aGVuKChzdHJpbmcpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhzdHJpbmcpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGZpbGVEcm9wRG93blRvZ2dsZSgpIHtcclxuICAgIHRoaXMud29ya3NwYWNlLmZpbGVEcm9wRG93biA9IHRydWU7XHJcbiAgICBsZXQgY2xpY2tDb3VudCA9IDA7XHJcbiAgICBjb25zdCBxdWl0RHJvcERvd24gPSAoZSkgPT4ge1xyXG4gICAgICBjbGlja0NvdW50Kys7XHJcbiAgICAgIGlmIChjbGlja0NvdW50ID4gMSkge1xyXG4gICAgICAgIHRoaXMud29ya3NwYWNlLmZpbGVEcm9wRG93biA9IGZhbHNlO1xyXG4gICAgICAgIHdpbmRvdy5vbmNsaWNrID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHdpbmRvdy5vbmNsaWNrID0gcXVpdERyb3BEb3duO1xyXG4gIH1cclxufVxyXG4iLCI8ZGl2IGNsYXNzPVwiaGVhZGVyXCI+XHJcbiAgPGlucHV0XHJcbiAgICAjdXBsb2FkRmlsZUlucHV0XHJcbiAgICAoY2hhbmdlKT1cIm9uRmlsZUNoYW5nZUhhbmRsZXIoJGV2ZW50KVwiXHJcbiAgICBjbGFzcz1cImludmlzaWJsZVwiXHJcbiAgICB0eXBlPVwiZmlsZVwiXHJcbiAgICBpZD1cInRlbXBsYXRlXCJcclxuICAgIG5hbWU9XCJ0ZW1wbGF0ZVwiXHJcbiAgICBhY2NlcHQ9XCIuZG9jeFwiXHJcbiAgLz5cclxuICA8ZGl2ICpuZ0lmPVwid29ya3NwYWNlLmZpbGVEcm9wRG93blwiIGNsYXNzPVwiaGVhZGVyX19lbGVtZW50X19kcm9wZG93blwiPlxyXG4gICAgPHBcclxuICAgICAgY2xhc3M9XCJoZWFkZXJfX2VsZW1lbnRfX2Ryb3Bkb3duX19pdGVtXCJcclxuICAgICAgW2NsYXNzLmhlYWRlcl9fZWxlbWVudF9fZHJvcGRvd25fX2l0ZW0tLWluYWN0aXZlXT1cIiFkb2N4RmlsZS5jb250ZW50XCJcclxuICAgICAgKGNsaWNrKT1cInNhdmUoKVwiXHJcbiAgICA+XHJcbiAgICAgIEd1YXJkYXJcclxuICAgIDwvcD5cclxuICAgIDxwXHJcbiAgICAgIGNsYXNzPVwiaGVhZGVyX19lbGVtZW50X19kcm9wZG93bl9faXRlbVwiXHJcbiAgICAgIFtjbGFzcy5oZWFkZXJfX2VsZW1lbnRfX2Ryb3Bkb3duX19pdGVtLS1pbmFjdGl2ZV09XCIhZG9jeEZpbGUuY29udGVudFwiXHJcbiAgICAgIChjbGljayk9XCJzYXZlVG9Db21wdXRlcigpXCJcclxuICAgID5cclxuICAgICAgR3VhcmRhciBhIGNvbXB1dGFkb3JhXHJcbiAgICA8L3A+XHJcbiAgICA8cFxyXG4gICAgICBjbGFzcz1cImhlYWRlcl9fZWxlbWVudF9fZHJvcGRvd25fX2l0ZW1cIlxyXG4gICAgICAoY2xpY2spPVwidXBsb2FkRmlsZUlucHV0LmNsaWNrKClcIlxyXG4gICAgPlxyXG4gICAgICBBYnJpciB0ZW1wbGF0ZVxyXG4gICAgPC9wPlxyXG4gIDwvZGl2PlxyXG4gIDxkaXZcclxuICAgIGNsYXNzPVwiaGVhZGVyX19lbGVtZW50IGhlYWRlcl9fZWxlbWVudC0tZmlsZVwiXHJcbiAgICAoY2xpY2spPVwiZmlsZURyb3BEb3duVG9nZ2xlKClcIlxyXG4gID5cclxuICAgIDxsYWJlbD5BcmNoaXZvPC9sYWJlbD5cclxuICA8L2Rpdj5cclxuICA8ZGl2IGNsYXNzPVwiaGVhZGVyX19lbGVtZW50IGhlYWRlcl9fZWxlbWVudC0tdGl0bGVcIj5cclxuICAgIHt7ZG9jeEZpbGUubmFtZX19XHJcbiAgPC9kaXY+XHJcbiAgPGRpdiBjbGFzcz1cImhlYWRlcl9fZWxlbWVudFwiICpuZ0lmPVwiZG9jeEZpbGUubGFzdE1vZGlmaWVkRGF0ZVwiPlxyXG4gICAgPCEtLSBkYXRlIHdpdGggaG91ciAtLT5cclxuICAgIMOabHRpbWEgbW9kaWZpY2FjacOzbjoge3tkb2N4RmlsZS5sYXN0TW9kaWZpZWREYXRlIHwgZGF0ZTogJ2RkL01NL3l5eXkgSEg6bW0nfX1cclxuICA8L2Rpdj5cclxuPC9kaXY+XHJcbiJdfQ==