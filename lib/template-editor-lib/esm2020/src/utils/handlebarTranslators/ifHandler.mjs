const ifID = '{{#if ';
const matchEveryPluck = /^\(every\s?\(pluck ([\S]+) '([\S]+)'\)\s?([\S]+)\)$/g;
const matchEqual = /^\(equal\s?([\S]+) '?([\S]+)'?\)$/g;
const matchOneVariable = /^[\S]+$/g;
const matchNotOneVariable = /^\(?not [\S]+\)?$/g;
const matchGreatherThan = /^\(?gt ([\S]+) (\d+)\)?$/g;
const matchTail = /tail\s?([\S][^\(\)\s]+)/g;
export const ifHandler = (handlebar) => {
    let insideValue = filterValue(handlebar.value);
    if (insideValue.match(matchEveryPluck)) {
        const match = matchEveryPluck.exec(insideValue);
        const variableName = match[1];
        const selectedProp = match[2];
        const filter = match[3];
        handlebar.value = translateEveryPluck({ variableName, selectedProp, filter });
    }
    else if (insideValue.match(matchEqual)) {
        const match = matchEqual.exec(insideValue);
        const variableName = match[1];
        const selectedProp = match[2];
        handlebar.value = translateEqual({ variableName, comparedValue: selectedProp });
    }
    else if (insideValue.match(matchOneVariable)) {
        insideValue = cleanInsideValue(insideValue);
        insideValue = insideValue.concat(' contiene valor y no es falso y no es igual 0');
        handlebar.value = insideValue;
    }
    else if (insideValue.match(matchGreatherThan)) {
        const match = matchGreatherThan.exec(insideValue);
        const variableName = match[1];
        const selectedProp = match[2];
        handlebar.value = `el valor de ${variableName} es mayor a ${selectedProp}`;
    }
    else if (insideValue.match(matchNotOneVariable)) {
        insideValue = cleanInsideValue(insideValue);
        insideValue = insideValue.concat(' no contiene valor o es falso o es igual 0');
        handlebar.value = insideValue;
    }
    else if (insideValue.match(matchTail)) {
        const match = matchTail.exec(insideValue);
        const variableName = match[1];
        handlebar.value = `${variableName} contiene valor y no es falso y no es igual 0`;
    }
    handlebar.value = `Si ${handlebar.value}, entonces mostrar:`;
    handlebar.handlebarType = 'if';
    handlebar.margin = handlebar.margin - 30;
    return handlebar;
};
const filterValue = (value) => {
    let content = value.replace(ifID, '');
    content = content.replace('}}', '');
    return content;
};
const cleanInsideValue = (insideValue) => {
    insideValue = insideValue.replace('@index', 'el numero del elemento que se está operando');
    insideValue = insideValue.replace('@last', 'es el último elemento de la lista y');
    insideValue = insideValue.replace(/[()]/g, '');
    insideValue = insideValue.replace('not ', '');
    return insideValue;
};
const translateEveryPluck = (opts) => {
    return `la propiedad ${opts.selectedProp} de TODOS los elementos de ${opts.variableName} son equivalentes a ${opts.filter}`;
};
const translateEqual = (opts) => {
    return `el valor de ${opts.variableName} es igual a ${opts.comparedValue}`;
};
// match if string has only a word, include @
const matchWord = /^[\S]+$/g;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaWZIYW5kbGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL3V0aWxzL2hhbmRsZWJhclRyYW5zbGF0b3JzL2lmSGFuZGxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxNQUFNLElBQUksR0FBRyxRQUFRLENBQUE7QUFFckIsTUFBTSxlQUFlLEdBQUcsc0RBQXNELENBQUM7QUFDL0UsTUFBTSxVQUFVLEdBQUcsb0NBQW9DLENBQUM7QUFDeEQsTUFBTSxnQkFBZ0IsR0FBRyxVQUFVLENBQUM7QUFDcEMsTUFBTSxtQkFBbUIsR0FBRyxvQkFBb0IsQ0FBQztBQUNqRCxNQUFNLGlCQUFpQixHQUFHLDJCQUEyQixDQUFDO0FBQ3RELE1BQU0sU0FBUyxHQUFHLDBCQUEwQixDQUFBO0FBRTVDLE1BQU0sQ0FBQyxNQUFNLFNBQVMsR0FBRyxDQUFDLFNBQThCLEVBQXVCLEVBQUU7SUFDL0UsSUFBSSxXQUFXLEdBQUcsV0FBVyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQTtJQUM5QyxJQUFJLFdBQVcsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLEVBQUU7UUFDdEMsTUFBTSxLQUFLLEdBQUcsZUFBZSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQTtRQUMvQyxNQUFNLFlBQVksR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDN0IsTUFBTSxZQUFZLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQzdCLE1BQU0sTUFBTSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUN2QixTQUFTLENBQUMsS0FBSyxHQUFHLG1CQUFtQixDQUFDLEVBQUUsWUFBWSxFQUFFLFlBQVksRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFBO0tBQzlFO1NBQU0sSUFBSSxXQUFXLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxFQUFFO1FBQ3hDLE1BQU0sS0FBSyxHQUFHLFVBQVUsQ0FBQyxJQUFJ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TyxnQkFBZ0IsSUFBSSxDQUFDLFlBQVksOEJBQThCLElBQUksQ0FBQyxZQUFZLHVCQUF1QixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUE7QUFDN0gsQ0FBQyxDQUFBO0FBRUQsTUFBTSxjQUFjLEdBQUcsQ0FBQyxJQUF3QixFQUFFLEVBQUU7SUFDbEQsT0FBTyxlQUFlLElBQUksQ0FBQyxZQUFZLGVBQWUsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFBO0FBQzVFLENBQUMsQ0FBQTtBQWFELDZDQUE2QztBQUM3QyxNQUFNLFNBQVMsR0FBRyxVQUFVLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZWFkYWJsZUluc3RydWN0aW9uIH0gZnJvbSBcIi4vdHlwZXNcIjtcclxuXHJcbmNvbnN0IGlmSUQgPSAne3sjaWYgJ1xyXG5cclxuY29uc3QgbWF0Y2hFdmVyeVBsdWNrID0gL15cXChldmVyeVxccz9cXChwbHVjayAoW1xcU10rKSAnKFtcXFNdKyknXFwpXFxzPyhbXFxTXSspXFwpJC9nO1xyXG5jb25zdCBtYXRjaEVxdWFsID0gL15cXChlcXVhbFxccz8oW1xcU10rKSAnPyhbXFxTXSspJz9cXCkkL2c7XHJcbmNvbnN0IG1hdGNoT25lVmFyaWFibGUgPSAvXltcXFNdKyQvZztcclxuY29uc3QgbWF0Y2hOb3RPbmVWYXJpYWJsZSA9IC9eXFwoP25vdCBbXFxTXStcXCk/JC9nO1xyXG5jb25zdCBtYXRjaEdyZWF0aGVyVGhhbiA9IC9eXFwoP2d0IChbXFxTXSspIChcXGQrKVxcKT8kL2c7XHJcbmNvbnN0IG1hdGNoVGFpbCA9IC90YWlsXFxzPyhbXFxTXVteXFwoXFwpXFxzXSspL2dcclxuXHJcbmV4cG9ydCBjb25zdCBpZkhhbmRsZXIgPSAoaGFuZGxlYmFyOiBSZWFkYWJsZUluc3RydWN0aW9uKTogUmVhZGFibGVJbnN0cnVjdGlvbiA9PiB7XHJcbiAgbGV0IGluc2lkZVZhbHVlID0gZmlsdGVyVmFsdWUoaGFuZGxlYmFyLnZhbHVlKVxyXG4gIGlmIChpbnNpZGVWYWx1ZS5tYXRjaChtYXRjaEV2ZXJ5UGx1Y2spKSB7XHJcbiAgICBjb25zdCBtYXRjaCA9IG1hdGNoRXZlcnlQbHVjay5leGVjKGluc2lkZVZhbHVlKVxyXG4gICAgY29uc3QgdmFyaWFibGVOYW1lID0gbWF0Y2hbMV1cclxuICAgIGNvbnN0IHNlbGVjdGVkUHJvcCA9IG1hdGNoWzJdXHJcbiAgICBjb25zdCBmaWx0ZXIgPSBtYXRjaFszXVxyXG4gICAgaGFuZGxlYmFyLnZhbHVlID0gdHJhbnNsYXRlRXZlcnlQbHVjayh7IHZhcmlhYmxlTmFtZSwgc2VsZWN0ZWRQcm9wLCBmaWx0ZXIgfSlcclxuICB9IGVsc2UgaWYgKGluc2lkZVZhbHVlLm1hdGNoKG1hdGNoRXF1YWwpKSB7XHJcbiAgICBjb25zdCBtYXRjaCA9IG1hdGNoRXF1YWwuZXhlYyhpbnNpZGVWYWx1ZSlcclxuICAgIGNvbnN0IHZhcmlhYmxlTmFtZSA9IG1hdGNoWzFdXHJcbiAgICBjb25zdCBzZWxlY3RlZFByb3AgPSBtYXRjaFsyXVxyXG4gICAgaGFuZGxlYmFyLnZhbHVlID0gdHJhbnNsYXRlRXF1YWwoeyB2YXJpYWJsZU5hbWUsIGNvbXBhcmVkVmFsdWU6IHNlbGVjdGVkUHJvcCB9KVxyXG4gIH0gZWxzZSBpZiAoaW5zaWRlVmFsdWUubWF0Y2gobWF0Y2hPbmVWYXJpYWJsZSkpIHtcclxuICAgIGluc2lkZVZhbHVlID0gY2xlYW5JbnNpZGVWYWx1ZShpbnNpZGVWYWx1ZSlcclxuICAgIGluc2lkZVZhbHVlID0gaW5zaWRlVmFsdWUuY29uY2F0KCcgY29udGllbmUgdmFsb3IgeSBubyBlcyBmYWxzbyB5IG5vIGVzIGlndWFsIDAnKVxyXG4gICAgaGFuZGxlYmFyLnZhbHVlID0gaW5zaWRlVmFsdWVcclxuICB9IGVsc2UgaWYgKGluc2lkZVZhbHVlLm1hdGNoKG1hdGNoR3JlYXRoZXJUaGFuKSkge1xyXG4gICAgY29uc3QgbWF0Y2ggPSBtYXRjaEdyZWF0aGVyVGhhbi5leGVjKGluc2lkZVZhbHVlKVxyXG4gICAgY29uc3QgdmFyaWFibGVOYW1lID0gbWF0Y2hbMV1cclxuICAgIGNvbnN0IHNlbGVjdGVkUHJvcCA9IG1hdGNoWzJdXHJcbiAgICBoYW5kbGViYXIudmFsdWUgPSBgZWwgdmFsb3IgZGUgJHt2YXJpYWJsZU5hbWV9IGVzIG1heW9yIGEgJHtzZWxlY3RlZFByb3B9YFxyXG4gIH0gZWxzZSBpZiAoaW5zaWRlVmFsdWUubWF0Y2gobWF0Y2hOb3RPbmVWYXJpYWJsZSkpIHtcclxuICAgIGluc2lkZVZhbHVlID0gY2xlYW5JbnNpZGVWYWx1ZShpbnNpZGVWYWx1ZSlcclxuICAgIGluc2lkZVZhbHVlID0gaW5zaWRlVmFsdWUuY29uY2F0KCcgbm8gY29udGllbmUgdmFsb3IgbyBlcyBmYWxzbyBvIGVzIGlndWFsIDAnKVxyXG4gICAgaGFuZGxlYmFyLnZhbHVlID0gaW5zaWRlVmFsdWVcclxuICB9IGVsc2UgaWYoaW5zaWRlVmFsdWUubWF0Y2gobWF0Y2hUYWlsKSkge1xyXG4gICAgY29uc3QgbWF0Y2ggPSBtYXRjaFRhaWwuZXhlYyhpbnNpZGVWYWx1ZSlcclxuICAgIGNvbnN0IHZhcmlhYmxlTmFtZSA9IG1hdGNoWzFdXHJcbiAgICBoYW5kbGViYXIudmFsdWUgPSBgJHt2YXJpYWJsZU5hbWV9IGNvbnRpZW5lIHZhbG9yIHkgbm8gZXMgZmFsc28geSBubyBlcyBpZ3VhbCAwYFxyXG4gIH1cclxuXHJcbiAgaGFuZGxlYmFyLnZhbHVlID0gYFNpICR7aGFuZGxlYmFyLnZhbHVlfSwgZW50b25jZXMgbW9zdHJhcjpgXHJcbiAgaGFuZGxlYmFyLmhhbmRsZWJhclR5cGUgPSAnaWYnXHJcbiAgaGFuZGxlYmFyLm1hcmdpbiA9IGhhbmRsZWJhci5tYXJnaW4gLSAzMFxyXG4gIHJldHVybiBoYW5kbGViYXJcclxufVxyXG5cclxuY29uc3QgZmlsdGVyVmFsdWUgPSAodmFsdWU6IHN0cmluZyk6IHN0cmluZyA9PiB7XHJcbiAgbGV0IGNvbnRlbnQgPSB2YWx1ZS5yZXBsYWNlKGlmSUQsICcnKVxyXG4gIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoJ319JywgJycpXHJcbiAgcmV0dXJuIGNvbnRlbnRcclxufVxyXG5cclxuY29uc3QgY2xlYW5JbnNpZGVWYWx1ZSA9IChpbnNpZGVWYWx1ZTogc3RyaW5nKSA9PiB7XHJcbiAgaW5zaWRlVmFsdWUgPSBpbnNpZGVWYWx1ZS5yZXBsYWNlKCdAaW5kZXgnLCAnZWwgbnVtZXJvIGRlbCBlbGVtZW50byBxdWUgc2UgZXN0w6Egb3BlcmFuZG8nKVxyXG4gIGluc2lkZVZhbHVlID0gaW5zaWRlVmFsdWUucmVwbGFjZSgnQGxhc3QnLCAnZXMgZWwgw7psdGltbyBlbGVtZW50byBkZSBsYSBsaXN0YSB5JylcclxuICBpbnNpZGVWYWx1ZSA9IGluc2lkZVZhbHVlLnJlcGxhY2UoL1soKV0vZywgJycpXHJcbiAgaW5zaWRlVmFsdWUgPSBpbnNpZGVWYWx1ZS5yZXBsYWNlKCdub3QgJywgJycpXHJcbiAgcmV0dXJuIGluc2lkZVZhbHVlXHJcbn1cclxuXHJcbmNvbnN0IHRyYW5zbGF0ZUV2ZXJ5UGx1Y2sgPSAob3B0czogVHJhbnNsYXRlRXZlcnlQbHVja09wdHMpID0+IHtcclxuICByZXR1cm4gYGxhIHByb3BpZWRhZCAke29wdHMuc2VsZWN0ZWRQcm9wfSBkZSBUT0RPUyBsb3MgZWxlbWVudG9zIGRlICR7b3B0cy52YXJpYWJsZU5hbWV9IHNvbiBlcXVpdmFsZW50ZXMgYSAke29wdHMuZmlsdGVyfWBcclxufVxyXG5cclxuY29uc3QgdHJhbnNsYXRlRXF1YWwgPSAob3B0czogVHJhbnNsYXRlRXF1YWxPcHRzKSA9PiB7XHJcbiAgcmV0dXJuIGBlbCB2YWxvciBkZSAke29wdHMudmFyaWFibGVOYW1lfSBlcyBpZ3VhbCBhICR7b3B0cy5jb21wYXJlZFZhbHVlfWBcclxufVxyXG5cclxuaW50ZXJmYWNlIFRyYW5zbGF0ZUV2ZXJ5UGx1Y2tPcHRzIHtcclxuICB2YXJpYWJsZU5hbWU6IHN0cmluZyxcclxuICBzZWxlY3RlZFByb3A6IHN0cmluZyxcclxuICBmaWx0ZXI6IHN0cmluZ1xyXG59XHJcblxyXG5pbnRlcmZhY2UgVHJhbnNsYXRlRXF1YWxPcHRzIHtcclxuICB2YXJpYWJsZU5hbWU6IHN0cmluZyxcclxuICBjb21wYXJlZFZhbHVlOiBzdHJpbmdcclxufVxyXG5cclxuLy8gbWF0Y2ggaWYgc3RyaW5nIGhhcyBvbmx5IGEgd29yZCwgaW5jbHVkZSBAXHJcbmNvbnN0IG1hdGNoV29yZCA9IC9eW1xcU10rJC9nOyJdfQ==