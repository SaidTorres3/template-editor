import { eachHandler } from "./eachHandler";
import { ifHandler } from "./ifHandler";
import { variableHandler } from "./variableHandler";
const ifID = '{{#if';
const elseID = '{{else';
const eachID = '{{#each';
const closeBlock = '{{/';
export const handlebarToInstruction = (handlebar) => {
    let result = handlebar;
    handlebar.value = handlebar.value.trim();
    if (doesHadlebarMatchID({ txt: handlebar.value, handlebarID: ifID })) {
        result = ifHandler(handlebar);
    }
    else if (doesHadlebarMatchID({ txt: handlebar.value, handlebarID: elseID })) {
        result.value = "De lo contrario, mostrar:";
        result.handlebarType = "if";
        result.margin = handlebar.margin;
    }
    else if (doesHadlebarMatchID({ txt: handlebar.value, handlebarID: eachID })) {
        result = eachHandler(handlebar);
    }
    else if (doesHadlebarMatchID({ txt: handlebar.value, handlebarID: closeBlock })) {
        result.value = '';
    }
    else {
        result = variableHandler(handlebar);
    }
    return result;
};
const doesHadlebarMatchID = (opts) => {
    let start = 0;
    opts.start ? start = opts.start : null;
    const txtSegment = opts.txt.substring(start, opts.handlebarID.length);
    return txtSegment === opts.handlebarID;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGFuZGxlYmFyVG9SZWFkYWJsZUluc3RydWN0aW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL3V0aWxzL2hhbmRsZWJhclRyYW5zbGF0b3JzL2hhbmRsZWJhclRvUmVhZGFibGVJbnN0cnVjdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzVDLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFFeEMsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRXBELE1BQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQTtBQUNwQixNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUE7QUFDdkIsTUFBTSxNQUFNLEdBQUcsU0FBUyxDQUFBO0FBQ3hCLE1BQU0sVUFBVSxHQUFHLEtBQUssQ0FBQTtBQUV4QixNQUFNLENBQUMsTUFBTSxzQkFBc0IsR0FBRyxDQUFDLFNBQThCLEVBQXVCLEVBQUU7SUFDNUYsSUFBSSxNQUFNLEdBQXdCLFNBQVMsQ0FBQztJQUM1QyxTQUFTLENBQUMsS0FBSyxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUE7SUFDeEMsSUFBSSxtQkFBbUIsQ0FBQyxFQUFFLEdBQUcsRUFBRSxTQUFTLENBQUMsS0FBSyxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFO1FBQ3BFLE1BQU0sR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUE7S0FDOUI7U0FBTSxJQUFJLG1CQUFtQixDQUFDLEVBQUUsR0FBRyxFQUFFLFNBQVMsQ0FBQyxLQUFLLEVBQUUsV0FBVyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUU7UUFDN0UsTUFBTSxDQUFDLEtBQUssR0FBRywyQkFBMkIsQ0FBQTtRQUMxQyxNQUFNLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQTtRQUMzQixNQUFNLENBQUMsTUFBTSxHQUFHLFNBQVMsQ0FBQyxNQUFNLENBQUE7S0FDakM7U0FBTSxJQUFJLG1CQUFtQixDQUFDLEVBQUUsR0FBRyxFQUFFLFNBQVMsQ0FBQyxLQUFLLEVBQUUsV0FBVyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUU7UUFDN0UsTUFBTSxHQUFHLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQTtLQUNoQztTQUFNLElBQUksbUJBQW1CLENBQUMsRUFBRSxHQUFHLEVBQUUsU0FBUyxDQUFDLEtBQUssRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRTtRQUNqRixNQUFNLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQTtLQUNsQjtTQUFNO1FBQ0wsTUFBTSxHQUFHLGVBQWUsQ0FBQyxTQUFTLENBQUMsQ0FBQTtLQUNwQztJQUNELE9BQU8sTUFBTSxDQUFDO0FBQ2hCLENBQUMsQ0FBQTtBQUVELE1BQU0sbUJBQW1CLEdBQUcsQ0FBQyxJQUE2QixFQUFXLEVBQUU7SUFDckUsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFBO0lBQ2IsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQTtJQUN0QyxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQTtJQUNyRSxPQUFPLFVBQVUsS0FBSyxJQUFJLENBQUMsV0FBVyxDQUFBO0FBQ3hDLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGVhY2hIYW5kbGVyIH0gZnJvbSBcIi4vZWFjaEhhbmRsZXJcIjtcclxuaW1wb3J0IHsgaWZIYW5kbGVyIH0gZnJvbSBcIi4vaWZIYW5kbGVyXCI7XHJcbmltcG9ydCB7IFJlYWRhYmxlSW5zdHJ1Y3Rpb24gfSBmcm9tIFwiLi90eXBlc1wiO1xyXG5pbXBvcnQgeyB2YXJpYWJsZUhhbmRsZXIgfSBmcm9tIFwiLi92YXJpYWJsZUhhbmRsZXJcIjtcclxuXHJcbmNvbnN0IGlmSUQgPSAne3sjaWYnXHJcbmNvbnN0IGVsc2VJRCA9ICd7e2Vsc2UnXHJcbmNvbnN0IGVhY2hJRCA9ICd7eyNlYWNoJ1xyXG5jb25zdCBjbG9zZUJsb2NrID0gJ3t7LydcclxuXHJcbmV4cG9ydCBjb25zdCBoYW5kbGViYXJUb0luc3RydWN0aW9uID0gKGhhbmRsZWJhcjogUmVhZGFibGVJbnN0cnVjdGlvbik6IFJlYWRhYmxlSW5zdHJ1Y3Rpb24gPT4ge1xyXG4gIGxldCByZXN1bHQ6IFJlYWRhYmxlSW5zdHJ1Y3Rpb24gPSBoYW5kbGViYXI7XHJcbiAgaGFuZGxlYmFyLnZhbHVlID0gaGFuZGxlYmFyLnZhbHVlLnRyaW0oKVxyXG4gIGlmIChkb2VzSGFkbGViYXJNYXRjaElEKHsgdHh0OiBoYW5kbGViYXIudmFsdWUsIGhhbmRsZWJhcklEOiBpZklEIH0pKSB7XHJcbiAgICByZXN1bHQgPSBpZkhhbmRsZXIoaGFuZGxlYmFyKVxyXG4gIH0gZWxzZSBpZiAoZG9lc0hhZGxlYmFyTWF0Y2hJRCh7IHR4dDogaGFuZGxlYmFyLnZhbHVlLCBoYW5kbGViYXJJRDogZWxzZUlEIH0pKSB7XHJcbiAgICByZXN1bHQudmFsdWUgPSBcIkRlIGxvIGNvbnRyYXJpbywgbW9zdHJhcjpcIlxyXG4gICAgcmVzdWx0LmhhbmRsZWJhclR5cGUgPSBcImlmXCJcclxuICAgIHJlc3VsdC5tYXJnaW4gPSBoYW5kbGViYXIubWFyZ2luXHJcbiAgfSBlbHNlIGlmIChkb2VzSGFkbGViYXJNYXRjaElEKHsgdHh0OiBoYW5kbGViYXIudmFsdWUsIGhhbmRsZWJhcklEOiBlYWNoSUQgfSkpIHtcclxuICAgIHJlc3VsdCA9IGVhY2hIYW5kbGVyKGhhbmRsZWJhcilcclxuICB9IGVsc2UgaWYgKGRvZXNIYWRsZWJhck1hdGNoSUQoeyB0eHQ6IGhhbmRsZWJhci52YWx1ZSwgaGFuZGxlYmFySUQ6IGNsb3NlQmxvY2sgfSkpIHtcclxuICAgIHJlc3VsdC52YWx1ZSA9ICcnXHJcbiAgfSBlbHNlIHtcclxuICAgIHJlc3VsdCA9IHZhcmlhYmxlSGFuZGxlcihoYW5kbGViYXIpXHJcbiAgfVxyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmNvbnN0IGRvZXNIYWRsZWJhck1hdGNoSUQgPSAob3B0czogRG9lc0hhZGxlYmFyTWF0Y2hJRE9wdHMpOiBib29sZWFuID0+IHtcclxuICBsZXQgc3RhcnQgPSAwXHJcbiAgb3B0cy5zdGFydCA/IHN0YXJ0ID0gb3B0cy5zdGFydCA6IG51bGxcclxuICBjb25zdCB0eHRTZWdtZW50ID0gb3B0cy50eHQuc3Vic3RyaW5nKHN0YXJ0LCBvcHRzLmhhbmRsZWJhcklELmxlbmd0aClcclxuICByZXR1cm4gdHh0U2VnbWVudCA9PT0gb3B0cy5oYW5kbGViYXJJRFxyXG59XHJcblxyXG5pbnRlcmZhY2UgRG9lc0hhZGxlYmFyTWF0Y2hJRE9wdHMge1xyXG4gIHR4dDogc3RyaW5nLFxyXG4gIGhhbmRsZWJhcklEOiBzdHJpbmdcclxuICBzdGFydD86IG51bWJlclxyXG59Il19